{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/goprotex/storm-damage-widget/main/realistic-storm-schema.json",
  "title": "Hayden Claims Group - Realistic Storm Data Schema",
  "description": "JSON schema matching actual vector store data fields",
  "type": "object",
  "properties": {
    "property_coordinates": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "description": "Property latitude extracted from address"
        },
        "longitude": {
          "type": "number", 
          "description": "Property longitude extracted from address"
        }
      },
      "required": ["latitude", "longitude"]
    },
    "search_summary": {
      "type": "object",
      "properties": {
        "total_events_found": {
          "type": "integer",
          "minimum": 0,
          "description": "Total storm events found within 15 miles"
        },
        "search_radius_miles": {
          "type": "integer",
          "default": 15,
          "description": "Search radius used"
        },
        "closest_event_distance": {
          "type": "number",
          "minimum": 0,
          "description": "Distance to closest event in miles"
        },
        "date_range": {
          "type": "string",
          "description": "Date range of events found"
        }
      },
      "required": ["total_events_found", "search_radius_miles"]
    },
    "wind_events": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "event_date": {
            "type": "string",
            "description": "Date from event_date field"
          },
          "hazard_type": {
            "type": "string",
            "description": "From hazard_type field (wind/unknown)"
          },
          "wind_speed_mph": {
            "type": ["number", "null"],
            "description": "From wind_speed_mph field or extracted from report_desc Magnitude"
          },
          "distance_miles": {
            "type": "number",
            "description": "Calculated distance from property"
          },
          "latitude": {
            "type": "number",
            "description": "Event latitude from geometry"
          },
          "longitude": {
            "type": "number",
            "description": "Event longitude from geometry"
          },
          "report_type": {
            "type": "string",
            "description": "Extracted from report_desc (STATION WIND GUST, etc.)"
          },
          "magnitude": {
            "type": ["number", "null"],
            "description": "Magnitude value from report_desc if available"
          }
        },
        "required": ["event_date", "distance_miles", "latitude", "longitude"]
      }
    },
    "hail_events": {
      "type": "array", 
      "items": {
        "type": "object",
        "properties": {
          "event_date": {
            "type": "string",
            "description": "Date from event_date field"
          },
          "hazard_type": {
            "type": "string", 
            "description": "From hazard_type field"
          },
          "hail_size_inches": {
            "type": ["number", "null"],
            "description": "From hail_size_in field or extracted from report_desc"
          },
          "distance_miles": {
            "type": "number",
            "description": "Calculated distance from property"
          },
          "latitude": {
            "type": "number",
            "description": "Event latitude"
          },
          "longitude": {
            "type": "number", 
            "description": "Event longitude"
          },
          "report_desc_excerpt": {
            "type": "string",
            "maxLength": 200,
            "description": "Relevant portion of report_desc"
          }
        },
        "required": ["event_date", "distance_miles", "latitude", "longitude"]
      }
    },
    "damage_reports": {
      "type": "array",
      "items": {
        "type": "object", 
        "properties": {
          "event_date": {
            "type": "string",
            "description": "Date from event_date field"
          },
          "hazard_type": {
            "type": "string",
            "description": "From hazard_type field"
          },
          "distance_miles": {
            "type": "number",
            "description": "Calculated distance from property"
          },
          "damage_description": {
            "type": "string",
            "maxLength": 300,
            "description": "Extracted damage info from report_desc"
          },
          "location": {
            "type": "string",
            "description": "Location info from report_desc (e.g., '4 W Marshall')"
          },
          "source": {
            "type": "string", 
            "description": "Source info from report_desc (Law Enforcement, etc.)"
          }
        },
        "required": ["event_date", "distance_miles", "damage_description"]
      }
    },
    "analysis_notes": {
      "type": "string",
      "maxLength": 500,
      "description": "Any limitations or data quality notes from the search"
    }
  },
  "required": [
    "property_coordinates",
    "search_summary", 
    "wind_events",
    "hail_events",
    "damage_reports"
  ],
  "additionalProperties": false
}